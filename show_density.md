# 减面检测热度图（多维度判断减面与否）

## Summary
基于多个维度的权重综合数值判断面数需要减去与否，最后形成热力图。

## 维度
- 法线差和**曲率**变化分析：	是否存在密集拓扑却是平面（过建），面数多但曲率变化小的地方
- 权重/**骨骼影响**标记：	是否变形区域？绑定骨骼的权重区域 or 有 blendshape，主要针对绑定
- **可见性**：	主要是被模型遮住或者远景
-  **UV**：	面很多，但 UV 占用非常低 → 几乎不会被贴图显示出细节（也就是面本身在整体的模型的占比对比它的UV占整体贴图的面积是吗）
- **面密度**：在模型表面上，单位空间内（三维空间中某个小范围）包含了多少个面，计算每个面/点在单位空间内的面数密度。
    - 构建空间索引（比如八叉树 or voxel grid）
    - 对每个面或点，计算其在指定半径（如 1cm）内的相邻面数量，用以衡量其局部面密度

## 表格

| 维度             | 描述                   | 权重      |
|-----------------|-----------------------------------|---------------------------------|
| 曲率变化         | 面密度高，但局部曲率变化小   |        ？          |
| 动画变形权重区   | 属于骨骼权重覆盖区或 Blendshape 区域     |     ？    |
| 相机可见性       | 模型是否经常处于主视角，是否有遮挡或远景     |            ？         |
| UV 占用密度      | 面数高但 UV 占用很低    |      ？    |
| 面密度           | 局部空间单位面密度   |                            ？           |


## 示例组合判断

- 面密度高 + 曲率低 + 非动画变形区 → 减面候选
- 面密度高 + 曲率高 + 权重覆盖 + 正面可见 → 保留优化拓扑
- 自动减面建议
    - 区域A：
        - 面密度：高
        - 曲率变化：低
        - 骨骼影响：无
        - UV占比：低
        - **建议减面**

## 最终判断热图
- 颜色说明 ： 之前提到的多个维度加权得出最终值
    - 0 = 不需要减面（蓝）
    - 1 = 非常建议减面（红）
    - 中间值 = 可能要人工判断（黄）

- 将结果烘焙到顶点颜色显示出来


## Pipeline
- 预处理
    - 每个顶点/面的邻域面密度（构建 voxel grid or KDTree）

    - 计算曲率（法线夹角 or 近似 Laplacian）

    - 计算 UV 密度（面面积 vs UV 面积占比）

    - 提取骨骼权重和 blendshape 影响区域

    - 可选：计算相机视野覆盖率或平均可见性

- 得分计算：

    - 对每个面或顶点，按上述公式计算最终评分

- 热力图可视化：

    - 将评分值映射为顶点颜色（蓝 → 红）

    - 可能添加浮窗显示评分细节



